{% extends "base.html" %}
{% block content %}

<h1>You should consume {{swirl.title}}</h1>

<div class="responses">
    <form method="POST" action="/swirls/{{swirl.id}}/respond">

        <table>
            {% for resp in responses %}
            <tr>
                <td class="username"><a href="/swirls/by/{{resp.username | urlescape}}">{{resp.username}}</a> said&nbsp;
                </td>
                <td class="response">{{resp.summary}}</td>
            </tr>
            {% endfor %}

            {% if can-respond %}
            {% csrf-field %}

            <tr>
                <td class="username">{{ user.username }}</td>
                <td>
                    <input type="hidden" name="swirl-id" value="{{swirl.id}}">

                    <input type="submit" name="responseButton" value="Good">
                    <input type="submit" name="responseButton" value="Bad">
                    <input type="submit" name="responseButton" value="Meh">

                    or
                    <input type="text" name="response-summary" maxlength="1000" value="{{response-summary}}"
                           placeholder="Enter a one-word response">
                    <input type="submit" name="responseButton" value="Submit">
                </td>
            </tr>

            {% endif %}

        </table>
    </form>

</div>

<article>
    {{swirl.review|safe}}
</article>

<h2>Comments</h2>

<div class="comments">
    {% for comment in comments %}

    <div>
        <a href="/swirls/by/{{ comment.username|urlescape }}">{{comment.username}}</a> said:
        <br>
        {{ comment.html_content|safe }}
    </div>

    {% endfor %}
</div>


{% if user %}

<form method="POST" action="/swirls/{{swirl.id}}/comment">
    {% csrf-field %}

    <input type="hidden" name="swirl-id" value="{{swirl.id}}">

    <label>Add your comment
        <textarea name="comment" required>{{current-comment}}</textarea>
    </label>

    <input type="submit" value="Submit">

</form>


{% else %}

<p>Sign in to have your say.</p>
{% endif %}


{% endblock %}
