{% extends "base.html" %}
{% block content %}
<div class="row">
    <div class="three columns ">
        <div class="profile"> {% if user %}

            <div class="headprofile">

                {{ user.email_md5|gravatar-img:80 }}
                <a href="{{ user.username|user-url }}">@{{user.username}}</a>
            </div>

            {% if response-counts|not-empty %}
            <div class="response-group">
                <h2>Your tagged items</h2>
                {% for rc in response-counts %}
                <a href="{{ rc.summary|inboxlink }}" class="button">{{rc.summary}} ({{rc.count}})</a>
                {% endfor %}
            </div>
            {% endif %}

            {% endif %}

        </div>

    </div>
    <div class="nine columns firehose-content">
        <h1>{{pageTitle}}</h1>
        {% if swirls|empty? %}
        We've run out of swirls. Gomen Nasai
        {% endif %}

        {% for swirl in swirls %}
        <div class="swirl">
            {{ swirl.email_md5|gravatar-img:40 }}

            <div class="swirl-content">
                <a href="/swirls/{{swirl.id}}">{{swirl.title}}</a> by
                <a href="{{swirl.username|user-url}}">@{{swirl.username}}</a>


                <article>
                    {{swirl.review|safe}}
                </article>

                <hr>
            </div>
        </div>
        {% endfor %}
        {% if countFrom = 20 %}<a href="/swirls/from/{{ countFrom|add:-20 }}">&lt; Previous 20 swirls</a>
        {% endif %}

        {% if all (countFrom = 20) (swirls|length = 20) %}|{% endif %}

        {% if swirls|length = 20 %}
        <a href="/swirls/from/{{countTo}}">Next 20 swirls &gt;</a>
        {% endif %}
    </div>
</div>
{% endblock %}
